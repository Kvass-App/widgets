import{_ as x,b as f,o as c,e as k,w as P,n as I,u as r,f as V,a as y,t as T,c as v,d as g,k as w,s as R,F as M,p as A,v as G,x as J,y as K,r as h,j as Y,z as Q,g as b,A as q,B as X,T as Z,q as ee}from"./_plugin-vue_export-helper.js";const te=`.category{padding:1rem 1.5rem;border:none;border-radius:var(--kvass-project-portal-border-radius, 3px);font-size:.9em;background-color:var(--kvass-project-portal-light-grey, #efefef)}.category:focus-visible{outline:2px solid var(--kvass-project-portal-primary, #0523a8);outline-offset:2px}.category--primary.category--active{background-color:var(--kvass-project-portal-primary, #0523a8)}.category--sale.category--active{background-color:var(--kvass-project-portal-sale, #2da71d)}.category--sold.category--active{background-color:var(--kvass-project-portal-sold, #cc3434)}.category--development.category--active{background-color:var(--kvass-project-portal-development, #3d495b)}.category--upcoming.category--active{background-color:var(--kvass-project-portal-upcoming, #e9b03d)}.category--default.category--active{background-color:var(--kvass-project-portal-default, #d1d1d1);color:#000}.category--active{color:#fff}
`,re={__name:"Category",props:{value:{type:String,default:"development"},component:{type:String,default:"div"},active:{type:Boolean}},setup(e){const t=e,d={sale:"sale",upcoming:"upcoming",development:"development",sold:"sold"},n={sale:"Til salgs",upcoming:"Kommer for salg",development:"Under utvikling",all:"Alle",sold:"Utsolgt"},i=f(()=>d[t.value]?d[t.value]:"default"),p=f(()=>n[t.value]);return(u,m)=>(c(),k(V(e.component),{class:I(["category",[`category--${r(i)}`,{"category--active":e.active}]])},{default:P(()=>[y("span",null,T(r(p)),1)]),_:1},8,["class"]))}},O=x(re,[["styles",[te]]]),ae=`.project-portal-card{position:relative;font-family:var(--kvass-project-portal-secondary-font, inherit);display:flex;flex-direction:column;border-radius:var(--kvass-project-portal-border-radius, 3px);background-color:#fff;text-decoration:none;color:inherit;overflow:hidden}.project-portal-card__header{min-height:var(--kvass-project-portal-header-min-height, 250px);background-color:var(--kvass-project-portal-dark, #272727);overflow:hidden}@media (max-width: 767px){.project-portal-card__header{min-height:var(--kvass-project-portal-header-min-height-breakpoint, 150px)}}.project-portal-card__header-category{position:absolute;background-color:var(--kvass-project-portal-secondary, #3d495b);z-index:11;color:#fff;left:var(--kvass-project-portal-card-status-gap, .5rem);top:var(--kvass-project-portal-card-status-gap, .5rem);border-radius:var(--kvass-project-portal-border-radius, 3px)}.project-portal-card__header-category .category{font-size:var(--kvass-project-portal-card-status-font-size, .8em);padding:var(--kvass-project-portal-card-status-padding-x, .5rem) var(--kvass-project-portal-card-status-padding-x, 1rem)}.project-portal-card__header-cover{width:100%;background-repeat:no-repeat;height:100%;background-size:cover;background-position:center;transition:transform .62s cubic-bezier(.05,.2,.1,1)}a.project-portal-card__header .project-portal-card__header-cover:is(:hover,:focus-visible){transform:scale(1.11);-webkit-transform:scale(1.11)}.project-portal-card__title{font-weight:700;line-height:1;margin:0}.project-portal-card__content{background-color:var(--kvass-project-portal-background-color, #efeded);border-top:none;text-align:left;display:flex;flex-direction:column;gap:.5rem;padding:calc(var(--kvass-project-portal-card-spacing, 2.5rem) - .5rem);height:100%}.project-portal-card__content-name{color:var(--kvass-project-portal-dark, #272727);margin:0!important}.project-portal-card__content-url{color:var(--kvass-project-portal-primary, #0523a8);font-size:1.1em;margin-top:auto;text-decoration:underline;text-decoration-color:var(--kvass-project-portal-primary, #0523a8);text-underline-offset:.3em;text-decoration-thickness:1px}.project-portal-card__content-url:hover{color:var(--kvass-project-portal-secondary, #3d495b)}.project-portal-card__content-city{font-size:1.2rem}.project-portal-card__content-location{display:flex;align-items:center;align-content:center;gap:.5rem;color:var(--kvass-project-portal-secondary, #3d495b)}.project-portal-card__content-location svg{opacity:.4;height:1em}.project-portal-card__content-location svg path{color:currentColor}@media (max-width: 767px){.project-portal-card__content{gap:.5rem;padding:calc(var(--kvass-project-portal-card-spacing, 2.5rem) - .5rem) calc(var(--kvass-project-portal-card-spacing, 2.5rem) - 1rem)}}.project-portal--theme-tiles .project-portal-card{border-radius:var(--kvass-project-portal-border-radius, 0px)}.project-portal--theme-tiles .project-portal-card:hover .project-portal-card__content{background:rgba(0,0,0,.2)!important}.project-portal--theme-tiles .project-portal-card__header{min-height:var(--kvass-project-portal-header-min-height, 400px)}@media (max-width: 767px){.project-portal--theme-tiles .project-portal-card__header{min-height:var(--kvass-project-portal-header-min-height-breakpoint, 250px)}}.project-portal--theme-tiles .project-portal-card__content{font-size:1.5rem;height:unset!important;position:absolute;inset:0;z-index:10;pointer-events:none;background:rgba(0,0,0,.4)!important;transition:background .2s ease;display:grid!important;place-content:center}.project-portal--theme-tiles .project-portal-card__content>*{color:#fff!important;text-align:center}.project-portal--theme-tiles .project-portal-card__content-url{text-decoration-color:currentColor;font-size:.8em}.project-portal--theme-tiles .project-portal-card__content-location{justify-content:center;margin-bottom:1rem}.project-portal--theme-tiles .project-portal-card__content-location svg{display:none}.project-portal--theme-tiles .project-portal-card__content-intro{font-size:.8em}
`,oe={key:0,class:"project-portal-card__header-category"},se={class:"project-portal-card__content"},le={class:"project-portal-card__content-name"},ne={key:0,class:"project-portal-card__content-location"},ce=y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"map-pin",role:"img",class:"w-5 h-5"},[y("path",{"fill-rule":"evenodd",d:"M9.69 18.933l.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 00.281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 103 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 002.273 1.765 11.842 11.842 0 00.976.544l.062.029.018.008.006.003zM10 11.25a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5z","clip-rule":"evenodd"})],-1),ie={class:"project-portal-card__content-city"},pe=["innerHTML"],de=["href"],ue={__name:"Card",props:{item:{type:Object,default:()=>({})},disableLabel:{type:Boolean,default:!1},theme:{type:String,default:"default",validator:e=>["default","tiles"].includes(e)}},setup(e){const t=e,d=f(()=>i(t.item.media&&t.item.media.cover?t.item.media.cover:null)||i(t.item.media&&t.item.media.gallery?t.item.media.gallery:null)),n=f(()=>t.item.status);function i(p){if(!p||!p.length)return;let u=p.find(m=>m.type?m.type.startsWith("image"):m);if(u)return u.url}return(p,u)=>(c(),v("div",{class:I(["project-portal-card",`project-portal-card--theme-${e.theme}`])},[(c(),k(V(e.item.url&&!["development"].includes(r(n))?"a":"div"),{class:"project-portal-card__header",href:e.item.url},{default:P(()=>[e.disableLabel?g("",!0):(c(),v("div",oe,[w(O,{value:r(n),component:"div",active:""},null,8,["value"])])),y("div",{class:"project-portal-card__header-cover",style:R({backgroundImage:`url(${r(d)})`})},null,4)]),_:1},8,["href"])),y("div",se,[y("h2",le,T(e.item.name),1),e.item.address&&e.item.address.city?(c(),v("span",ne,[ce,y("span",ie,T(e.item.address?e.item.address.city:""),1)])):g("",!0),y("div",{class:"project-portal-card__content-intro",innerHTML:e.item.intro},null,8,pe),e.item.url&&!["development"].includes(r(n))?(c(),v("a",{key:1,class:"project-portal-card__content-url",href:e.item.url}," Se prosjektet ",8,de)):g("",!0)])],2))}},E=x(ue,[["styles",[ae]]]),me=`.project-portal-category__selector{cursor:pointer}@media (max-width: 767px){.project-portal-category__selector{width:100%}}.project-portal-category__selector:hover{box-shadow:inset 0 0 0 2em #4a4a4a33}
`,ve={class:"project-portal-category"},ge={__name:"CategorySelector",props:{items:{type:Array,default:()=>[]},value:{type:String}},setup(e){return(t,d)=>(c(),v("div",ve,[(c(!0),v(M,null,A(e.items,(n,i)=>(c(),k(O,{key:i,class:"project-portal-category__selector",value:n,active:e.value==n,component:"button",onClick:p=>t.$emit("input",n)},null,8,["value","active","onClick"]))),128))]))}},H=x(ge,[["styles",[me]]]),fe=`.project-type-selector .elder-dropdown__content{z-index:11}.project-type-selector__trigger{appearance:none;padding:1rem 2rem;border:none;border-radius:var(--kvass-project-portal-border-radius, 3px);font-size:.9em;background-color:var(--kvass-project-portal-primary, #0523a8);color:#fff}.project-type-selector__trigger:-ms-expand{display:none}@media (max-width: 767px){.project-type-selector__trigger{width:100%}}.project-type-selector__dropdown-item{text-align:center!important;padding:.5rem 1.5rem;font-size:.9em}.project-type-selector__dropdown-item--selected{background-color:#8f8f8f66}.project-type-selector__dropdown-item:hover{background-color:#24242466}
`,ye={class:"project-type-selector__trigger"},_e=["value","onChange"],he={__name:"ProjectTypeSelector",props:{items:{type:Array,default:()=>[]},value:{type:String}},setup(e){function t(d){return d.charAt(0).toUpperCase()+d.substring(1)}return(d,n)=>(c(),v("select",ye,[(c(!0),v(M,null,A(e.items,(i,p)=>(c(),v("option",{key:p,value:i,onChange:u=>d.$emit("input",i),class:"project-type-selector__dropdown-item"},T(t(i==="none"?"Velg type":i)),41,_e))),128))]))}},D=x(he,[["styles",[fe]]]);function je(e){if(!(!e||typeof e!="object"))return typeof e.then=="function"&&typeof e.catch=="function"}const ke=["innerHTML"],F={__name:"SlotHandler",props:{value:[String,Object]},setup(e){const t=e,d=f(()=>typeof t.value=="string"?t.value:void 0),n=f(()=>typeof t.value=="string"?"div":t.value);return(i,p)=>(c(),k(V(r(n)),G(J(i.$attrs)),{default:P(()=>[r(d)?(c(),v("span",{key:0,innerHTML:r(d)},null,8,ke)):g("",!0)]),_:1},16))}},be="",xe=["width","height"],we=["stroke-width"],$e={__name:"Spinner",props:{size:{type:Number,default:32},strokeWidth:{type:Number,default:4}},setup(e){return(t,d)=>(c(),v("svg",{class:"spinner",width:e.size,height:e.size,viewBox:"0 0 50 50"},[y("circle",{cx:"25",cy:"25",r:"20",fill:"none","stroke-width":e.strokeWidth},null,8,we)],8,xe))}},U=x($e,[["styles",[be]]]),Se="",Ce={key:3,class:"kvass-loader__element"},ze={class:"kvass-loader__element-content"},Pe={class:"kvass-loader__element-content-inner"},Te={class:"kvass-loader__loading-message"},Be={__name:"component",props:{value:[Boolean,Promise],theme:{type:String,validator:e=>["overlay","default"].includes(e)},message:String,delay:Number},setup(e){const t=e,d=K(),n=h(null),i=h(null),p=h(null),u=f(()=>Boolean(n.value==="error"&&(d.error||l.value.messages.error))),m=h(!1),$=f(()=>!!(m.value||o.value&&l.value.theme==="overlay")),S=h(t.value);Y(()=>{Q(S,a=>{je(a)?(B(),a.then(()=>C("success")).catch(j=>{throw p.value=j,C("error"),j})):a?B():C("success")},{immediate:!0})});function _(){n.value=void 0,p.value=void 0,m.value=!1}function B(){_(),l.value.delay?(i.value=clearTimeout(i.value),i.value=setTimeout(()=>m.value=!0,l.value.delay)):m.value=!0}function C(a){i.value=clearTimeout(i.value),n.value=a,m.value=!1}const L=f(()=>l.value.theme==="overlay"?!0:!m.value&&!s.value&&!u.value),o=f(()=>u.value||s.value),s=f(()=>Boolean(n.value==="success"&&(d.success||l.value.messages.success))),l=f(()=>({messages:{loading:t.message||z.messages.loading,error:z.messages.error,success:z.messages.success},theme:t.theme||z.theme,delay:t.delay||z.delay}));return(a,j)=>(c(),v("div",{class:I(["kvass-loader",["kvass-loader--"+r(l).theme,{"kvass-loader--active":m.value,["kvass-loader--"+n.value]:n.value}]])},[r(L)?b(a.$slots,"default",{key:0}):g("",!0),r(s)&&r(l).theme==="default"?b(a.$slots,"success",{key:1,reset:_},()=>[w(F,{value:r(l).messages.success,reset:_},null,8,["value"])]):g("",!0),r(u)&&r(l).theme==="default"?b(a.$slots,"error",{key:2,error:p.value,reset:_},()=>[w(F,{value:r(l).messages.error,reset:_,error:p.value},null,8,["value","error"]),q(" >")]):g("",!0),r($)?(c(),v("div",Ce,[y("div",ze,[y("div",Pe,[r(s)&&r(l).theme==="overlay"?b(a.$slots,"success",{key:0,reset:_},()=>[w(F,{value:r(l).messages.success,reset:_},null,8,["value"])]):g("",!0),r(u)&&r(l).theme==="overlay"?b(a.$slots,"error",{key:1,error:p.value,reset:_},()=>[w(F,{value:r(l).messages.error,reset:_,error:p.value},null,8,["value","error"])]):g("",!0),m.value?b(a.$slots,"loader",{key:2,content:r(l)},()=>[w(U),y("div",Te,[b(a.$slots,"message",{},()=>[q(T(r(l).messages.loading),1)])])]):g("",!0)])])])):g("",!0)],2))}},W=x(Be,[["styles",[Se]]]),z={theme:"default",messages:{loading:"Loading...",error:null,success:null},delay:0};function Fe(e){return fetch(`${e}/api/graphql`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
			query {
				Projects {
					id
					name
					url
					isPublished
					media {
						cover {
							url
							type
						}
						gallery {
							url
							type
						}
					}
					address {
						street
						city
						county
						postcode
						location {
							coordinates
						}
					}
					stats {
						total
						sale
					}
					customFields(keys: ["project-intro", "project-type"])
				}
			}
			`})}).then(t=>t.json()).then(t=>t.data)}const Ie=`.project-portal__navigation{display:flex;justify-content:var(--kvass-project-portal-nav-position, center);padding:0 2rem 3rem;gap:1.5rem}@media (max-width: 767px){.project-portal__navigation{flex-direction:column-reverse;justify-content:center;gap:.5rem}}.project-portal__navigation-category{display:flex;justify-content:center;gap:1.5rem}@media (max-width: 767px){.project-portal__navigation-category{flex-direction:column;gap:.5rem;align-items:center}}.project-portal__cards{position:relative;display:grid;gap:var(--kvass-project-portal-grid-gap, 2rem);grid-template-columns:repeat(var(--kvass-project-portal-grid-columns, 4),1fr)}@media (max-width: 767px){.project-portal__cards{grid-template-columns:1fr;padding-top:2rem}}.project-portal__no-result{font-size:1.2em;text-align:center;display:flex;justify-content:center;align-items:center;min-height:200px;margin:2rem 0;background-color:var(--kvass-project-portal-light-grey, #efefef)}@media (max-width: 767px){.project-portal__no-result{min-height:100px}}.list-leave-active,.list-move{position:absolute}.list-move,.list-enter-active,.list-leave-active{transition:all .3s ease}.list-enter-from,.list-leave-to{opacity:0;transform:translateY(1rem)}.project-portal--theme-tiles .project-portal__card{gap:var(--kvass-project-portal-grid-gap, 0rem);grid-template-columns:repeat(var(--kvass-project-portal-grid-columns, 2),1fr)}@media (max-width: 767px){.project-portal--theme-tiles .project-portal__card{grid-template-columns:1fr;padding-top:2rem}}
`,Le={key:0,class:"project-portal__navigation"},Ne={key:2,class:"project-portal__no-result"},Ve={__name:"App",props:{source:{type:String,required:!0},startCategory:{type:String,default:"all",validator:e=>["all","sale","upcoming","development","sold"].includes(e)},enabledCategories:{type:String,default:"all,sale,upcoming,development,sold"},theme:{type:String,validator:e=>["default","tiles"].includes(e),default:"default"},sortOn:{type:String,validator:e=>["status","name"].includes(e),default:"status"},disableNav:{type:Boolean,default:!1}},setup(e){const t=e;function d(o,s){switch(o){case"status":switch(s[o]){case"sale":return 2;case"upcoming":return 1;default:return 0}case"name":return s[o]}}const n=h(""),i=h("none"),p=h([]),u=h([]),m=h(null),$=f(()=>[...t.enabledCategories.split(",").filter(o=>o==="all"?!0:u.value.find(s=>s.status.includes(o)))]),S=f(()=>{let o=["none"].concat(u.value.map(s=>{if(s.customFields&&s.customFields["project-type"])return s.customFields["project-type"]}));return[...new Set(o||[])].filter(Boolean)});function _(){p.value=u.value.filter(o=>n.value==="all"?!0:o.status.includes(n.value)).filter(o=>{if(!S.length||i.value==="none")return!0;if(!(!o.customFields||!o.customFields["project-type"]))return o.customFields["project-type"].includes(i.value)})}function B(){return t.source?Fe(t.source):Promise.resolve()}function C(o){if(o.status)return o.status;let s=o.stats.total;return o.isPublished&&s&&!o.stats.sale?"sold":o.isPublished&&s?"sale":o.isPublished&&!s?"upcoming":(o.isPublished,"development")}function L(){m.value=B().then(async o=>{let s=[];typeof customItems<"u"&&(s=typeof customItems=="function"?await customItems():customItems);let l=o?o.Projects.filter(a=>{if(!s.find(j=>j.id?j.id.includes(a.id):void 0))return a}):[];return u.value=[...l,...s],u.value=u.value.map(a=>(a.status=C(a),{intro:a.customFields?a.customFields["project-intro"]:"",...a,sortVale:d(t.sortOn,a),url:a.url})).sort((a,j)=>{switch(t.sortOn){case"status":if(a.sortVale<j.sortVale)return 1;if(a.sortVale>j.sortVale)return-1}}).filter(a=>t.enabledCategories.split(",").includes(a.status))}).then(()=>{n.value=t.startCategory,p.value=u.value})}return X(()=>{L()}),(o,s)=>(c(),k(r(W),{value:m.value},{default:P(()=>[y("div",{class:I(["project-portal",`project-portal--theme-${e.theme}`])},[!e.disableNav||!r($).length?(c(),v("div",Le,[r($).length?(c(),k(H,{key:0,class:"project-portal__navigation-category",items:r($),value:n.value,onInput:s[0]||(s[0]=l=>{n.value=l,_()})},null,8,["items","value"])):g("",!0),r(S).length>1?(c(),k(D,{key:1,class:"project-portal__navigation-project-type",items:r(S),value:i.value,onInput:s[1]||(s[1]=l=>{i.value=l.target.value,_()})},null,8,["items","value"])):g("",!0)])):g("",!0),p.value&&p.value.length?(c(),k(Z,{key:1,tag:"div",name:"list",appear:"",class:"project-portal__cards"},{default:P(()=>[(c(!0),v(M,null,A(p.value,(l,a)=>(c(),k(E,{"disable-label":e.disableNav,key:l.id,item:l},null,8,["disable-label","item"]))),128))]),_:1})):(c(),v("div",Ne,"Ingen resultater"))],2)]),_:1},8,["value"]))}},N=x(Ve,[["styles",[Ie]]]);N.styles=[...N.styles,...E.styles,...O.styles,...H.styles,...D.styles,...W.styles,...U.styles];customElements.define("kvass-project-portal",ee(N));
